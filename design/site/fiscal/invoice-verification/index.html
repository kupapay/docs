
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../security-elements/" rel="prev"/>
<link href="../reports/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Invoice Verification - Bono Pay Technical Design</title>
<link href="../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/mermaid-zoom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="#3FFF00" data-md-color-primary="#3FFF00" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#invoice-verification">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Bono Pay Technical Design" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Bono Pay Technical Design">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Bono Pay Technical Design
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Invoice Verification
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Bono Pay Technical Design" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Bono Pay Technical Design">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Bono Pay Technical Design
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/trust-boundary/">
<span class="md-ellipsis">
    
  
    Trust Boundary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/components/">
<span class="md-ellipsis">
    
  
    Component Map
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/data-flow/">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Invoicing Platform
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Invoicing Platform
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/overview/">
<span class="md-ellipsis">
    
  
    Product Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/api/">
<span class="md-ellipsis">
    
  
    Invoicing API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/dashboard/">
<span class="md-ellipsis">
    
  
    Web Dashboard
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/sdk/">
<span class="md-ellipsis">
    
  
    SDK &amp; Libraries
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Fiscal Engine
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Fiscal Engine
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../invoice-lifecycle/">
<span class="md-ellipsis">
    
  
    Invoice Lifecycle
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tax-engine/">
<span class="md-ellipsis">
    
  
    Tax Engine (14 Groups)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../security-elements/">
<span class="md-ellipsis">
    
  
    Security Elements
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Invoice Verification
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Invoice Verification
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-verification-matters">
<span class="md-ellipsis">
      
        Why verification matters
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verification-channels">
<span class="md-ellipsis">
      
        Verification channels
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#public-verification-portal">
<span class="md-ellipsis">
      
        Public Verification Portal
      
    </span>
</a>
<nav aria-label="Public Verification Portal" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#user-flow">
<span class="md-ellipsis">
      
        User flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#portal-display">
<span class="md-ellipsis">
      
        Portal display
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#privacy-constraints">
<span class="md-ellipsis">
      
        Privacy constraints
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verification-api">
<span class="md-ellipsis">
      
        Verification API
      
    </span>
</a>
<nav aria-label="Verification API" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#verify-by-fiscal-number">
<span class="md-ellipsis">
      
        Verify by fiscal number
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verify-by-qr-payload">
<span class="md-ellipsis">
      
        Verify by QR payload
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bulk-verification">
<span class="md-ellipsis">
      
        Bulk verification
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cryptographic-verification-flow">
<span class="md-ellipsis">
      
        Cryptographic verification flow
      
    </span>
</a>
<nav aria-label="Cryptographic verification flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-details">
<span class="md-ellipsis">
      
        Step details
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#public-key-distribution">
<span class="md-ellipsis">
      
        Public key distribution
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#qr-code-payload-format">
<span class="md-ellipsis">
      
        QR code payload format
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#whatsapp-verification">
<span class="md-ellipsis">
      
        WhatsApp verification
      
    </span>
</a>
<nav aria-label="WhatsApp verification" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-phase-2-alongside-whatsapp-bot-launch">
<span class="md-ellipsis">
      
        Phase: Phase 2 (alongside WhatsApp bot launch)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sdk-verification-helpers">
<span class="md-ellipsis">
      
        SDK verification helpers
      
    </span>
</a>
<nav aria-label="SDK verification helpers" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#javascript-sdk">
<span class="md-ellipsis">
      
        JavaScript SDK
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#python-sdk">
<span class="md-ellipsis">
      
        Python SDK
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#offline-verification">
<span class="md-ellipsis">
      
        Offline verification
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboard-verification">
<span class="md-ellipsis">
      
        Dashboard verification
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#anti-abuse-protections">
<span class="md-ellipsis">
      
        Anti-abuse protections
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phasing">
<span class="md-ellipsis">
      
        Phasing
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../reports/">
<span class="md-ellipsis">
    
  
    Reports (Z/X/A)
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Cloud &amp; Sync
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Cloud &amp; Sync
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cloud/architecture/">
<span class="md-ellipsis">
    
  
    Cloud Architecture
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cloud/offline-sync/">
<span class="md-ellipsis">
    
  
    Offline-First Sync
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cloud/dgi-integration/">
<span class="md-ellipsis">
    
  
    DGI Integration
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Platform &amp; Integrations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Platform &amp; Integrations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/multi-user/">
<span class="md-ellipsis">
    
  
    Multi-User Access
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/ai-capabilities/">
<span class="md-ellipsis">
    
  
    AI &amp; Natural Language
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../platform/integrations/">
<span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Regulatory
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Regulatory
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory/legal-framework/">
<span class="md-ellipsis">
    
  
    DRC Legal Framework
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory/arretes/">
<span class="md-ellipsis">
    
  
    Arrêté Summary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory/sfe-specs/">
<span class="md-ellipsis">
    
  
    SFE Specifications
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    ADRs
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    ADRs
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/">
<span class="md-ellipsis">
    
  
    Index
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0001/">
<span class="md-ellipsis">
    
  
    0001 - Two-Phase Commit
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0002/">
<span class="md-ellipsis">
    
  
    0002 - Signature Algorithm
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0003/">
<span class="md-ellipsis">
    
  
    0003 - Platform Technology Stack
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0004/">
<span class="md-ellipsis">
    
  
    0004 - Cloud Fiscal Signing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0005/">
<span class="md-ellipsis">
    
  
    0005 - Strategic Pivot
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/cloud/">
<span class="md-ellipsis">
    
  
    Cloud API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/invoicing-sdk/">
<span class="md-ellipsis">
    
  
    Invoicing SDK
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Implementation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            
  
    Implementation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/roadmap/">
<span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-1/">
<span class="md-ellipsis">
    
  
    Phase 1 - Software Invoicing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-2/">
<span class="md-ellipsis">
    
  
    Phase 2 - POS &amp; Retail
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-3/">
<span class="md-ellipsis">
    
  
    Phase 3 - USB Hardware
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-4/">
<span class="md-ellipsis">
    
  
    Phase 4 - Enterprise
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-verification-matters">
<span class="md-ellipsis">
      
        Why verification matters
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verification-channels">
<span class="md-ellipsis">
      
        Verification channels
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#public-verification-portal">
<span class="md-ellipsis">
      
        Public Verification Portal
      
    </span>
</a>
<nav aria-label="Public Verification Portal" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#user-flow">
<span class="md-ellipsis">
      
        User flow
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#portal-display">
<span class="md-ellipsis">
      
        Portal display
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#privacy-constraints">
<span class="md-ellipsis">
      
        Privacy constraints
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verification-api">
<span class="md-ellipsis">
      
        Verification API
      
    </span>
</a>
<nav aria-label="Verification API" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#verify-by-fiscal-number">
<span class="md-ellipsis">
      
        Verify by fiscal number
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verify-by-qr-payload">
<span class="md-ellipsis">
      
        Verify by QR payload
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bulk-verification">
<span class="md-ellipsis">
      
        Bulk verification
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cryptographic-verification-flow">
<span class="md-ellipsis">
      
        Cryptographic verification flow
      
    </span>
</a>
<nav aria-label="Cryptographic verification flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-details">
<span class="md-ellipsis">
      
        Step details
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#public-key-distribution">
<span class="md-ellipsis">
      
        Public key distribution
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#qr-code-payload-format">
<span class="md-ellipsis">
      
        QR code payload format
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#whatsapp-verification">
<span class="md-ellipsis">
      
        WhatsApp verification
      
    </span>
</a>
<nav aria-label="WhatsApp verification" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-phase-2-alongside-whatsapp-bot-launch">
<span class="md-ellipsis">
      
        Phase: Phase 2 (alongside WhatsApp bot launch)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sdk-verification-helpers">
<span class="md-ellipsis">
      
        SDK verification helpers
      
    </span>
</a>
<nav aria-label="SDK verification helpers" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#javascript-sdk">
<span class="md-ellipsis">
      
        JavaScript SDK
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#python-sdk">
<span class="md-ellipsis">
      
        Python SDK
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#offline-verification">
<span class="md-ellipsis">
      
        Offline verification
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboard-verification">
<span class="md-ellipsis">
      
        Dashboard verification
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#anti-abuse-protections">
<span class="md-ellipsis">
      
        Anti-abuse protections
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phasing">
<span class="md-ellipsis">
      
        Phasing
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="invoice-verification">Invoice Verification<a class="headerlink" href="#invoice-verification" title="Permanent link">¶</a></h1>
<p>Every sealed Bono Pay invoice carries a QR code that encodes the fiscal number, auth code, timestamp, and a verification URL. Invoice verification is the public-facing system that lets <strong>anyone</strong> — customers, auditors, DGI inspectors, or merchants themselves — confirm that an invoice was genuinely issued and sealed by the Cloud Signing Service (HSM). This page specifies the verification channels, API, cryptographic flow, and trust model.</p>
<h2 id="why-verification-matters">Why verification matters<a class="headerlink" href="#why-verification-matters" title="Permanent link">¶</a></h2>
<p>Counterfeit invoices are a compliance and revenue risk in DRC markets. A trader hands a customer a receipt — how does the customer know it was really fiscalized? Verification closes that loop:</p>
<ul>
<li><strong>Customers</strong> scan the QR on their receipt and instantly see whether the invoice is authentic.</li>
<li><strong>DGI inspectors</strong> verify invoices during field audits without needing VPN access to the merchant's systems.</li>
<li><strong>Auditors</strong> validate invoice chains in bulk through the API.</li>
<li><strong>Business partners</strong> confirm supplier invoices before recording them as deductible expenses.</li>
</ul>
<h2 id="verification-channels">Verification channels<a class="headerlink" href="#verification-channels" title="Permanent link">¶</a></h2>
<pre class="mermaid"><code>flowchart LR
    QR["QR Code on Receipt"] --&gt; PORTAL["Public Verification Portal\nverify.bonopay.cd"]
    QR --&gt; API["Verification API\n/api/v1/verify"]
    QR --&gt; WHATSAPP["WhatsApp Bot\n'Vérifier facture'"]
    MANUAL["Manual Entry\n(fiscal number + auth code)"] --&gt; PORTAL
    MANUAL --&gt; WHATSAPP
    PORTAL --&gt; RESULT["✅ Verified / ❌ Not Found / ⚠️ Tampered"]
    API --&gt; RESULT
    WHATSAPP --&gt; RESULT</code></pre>
<table>
<thead>
<tr>
<th>Channel</th>
<th>Description</th>
<th>Authentication required</th>
<th>Phase</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Public Verification Portal</strong></td>
<td>Web page at <code>verify.bonopay.cd</code> — scan QR or type fiscal number + auth code</td>
<td>No (public)</td>
<td>Phase 1</td>
</tr>
<tr>
<td><strong>Verification API</strong></td>
<td>REST endpoint for programmatic verification</td>
<td>No (public, rate-limited)</td>
<td>Phase 1</td>
</tr>
<tr>
<td><strong>WhatsApp Bot</strong></td>
<td>Send QR photo or fiscal number to the bot</td>
<td>No (public)</td>
<td>Phase 2</td>
</tr>
<tr>
<td><strong>Dashboard</strong></td>
<td>Inline verification in the merchant dashboard</td>
<td>Yes (authenticated)</td>
<td>Phase 1</td>
</tr>
<tr>
<td><strong>SDK helpers</strong></td>
<td><code>verifyInvoice()</code> method in JavaScript / Python SDKs</td>
<td>No (delegates to API)</td>
<td>Phase 1</td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="public-verification-portal">Public Verification Portal<a class="headerlink" href="#public-verification-portal" title="Permanent link">¶</a></h2>
<p>The portal at <strong><code>verify.bonopay.cd</code></strong> is a lightweight, mobile-first web page that requires no login. It's the URL encoded in every QR code.</p>
<h3 id="user-flow">User flow<a class="headerlink" href="#user-flow" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant C as Customer / Inspector
    participant P as verify.bonopay.cd
    participant V as Verification Service
    participant L as Fiscal Ledger

    C-&gt;&gt;P: Scan QR code or enter fiscal number + auth code
    P-&gt;&gt;V: GET /api/v1/verify/{fiscal_number}?auth_code=...
    V-&gt;&gt;L: Look up fiscal_number in ledger
    L--&gt;&gt;V: Ledger entry (or not found)
    V-&gt;&gt;V: Verify ECDSA signature against HSM public key
    V-&gt;&gt;V: Compare auth_code, timestamp, fiscal_authority_id
    V--&gt;&gt;P: Verification result
    P--&gt;&gt;C: Display result with invoice summary</code></pre>
<h3 id="portal-display">Portal display<a class="headerlink" href="#portal-display" title="Permanent link">¶</a></h3>
<p><strong>Verified invoice (✅):</strong></p>
<div class="highlight"><pre><span></span><code>╔══════════════════════════════════════════════╗
║  ✅  FACTURE VÉRIFIÉE                       ║
║                                              ║
║  N° Fiscal:    BONO-OUTLET001-000123         ║
║  Commerçant:   Acme SARL                     ║
║  Date:         17 fév 2026, 14:32 UTC        ║
║  Montant:      116 000 FC (TVA incl.)        ║
║  Autorité:     HSM-CLUSTER-01                ║
║                                              ║
║  Signature cryptographique: ✅ Valide        ║
║  Chaîne du registre:        ✅ Intacte       ║
║  Statut DGI:                ✅ Synchronisé   ║
╚══════════════════════════════════════════════╝
</code></pre></div>
<p><strong>Not found (❌):</strong></p>
<div class="highlight"><pre><span></span><code>╔══════════════════════════════════════════════╗
║  ❌  FACTURE NON TROUVÉE                    ║
║                                              ║
║  Le numéro fiscal fourni ne correspond       ║
║  à aucune facture enregistrée dans le        ║
║  système Bono Pay.                           ║
║                                              ║
║  Si vous pensez que c'est une erreur,        ║
║  contactez le commerçant ou le support.      ║
╚══════════════════════════════════════════════╝
</code></pre></div>
<p><strong>Tampered / invalid signature (⚠️):</strong></p>
<div class="highlight"><pre><span></span><code>╔══════════════════════════════════════════════╗
║  ⚠️  ATTENTION — SIGNATURE INVALIDE        ║
║                                              ║
║  La facture existe dans le registre mais     ║
║  la signature cryptographique ne correspond  ║
║  pas. Ce document a peut-être été modifié    ║
║  après son émission.                         ║
║                                              ║
║  Contactez le commerçant et la DGI.          ║
╚══════════════════════════════════════════════╝
</code></pre></div>
<h3 id="privacy-constraints">Privacy constraints<a class="headerlink" href="#privacy-constraints" title="Permanent link">¶</a></h3>
<p>The public portal shows a <strong>limited summary</strong> — merchant name, date, total amount, and verification status. It does <strong>not</strong> expose:</p>
<ul>
<li>Individual line items or item descriptions</li>
<li>Client (buyer) name or NIF</li>
<li>Payment method details</li>
<li>Raw canonical payload or ledger hashes</li>
</ul>
<p>Merchants can optionally enable <strong>full receipt display</strong> for verified invoices via a dashboard toggle. Default: summary only.</p>
<hr/>
<h2 id="verification-api">Verification API<a class="headerlink" href="#verification-api" title="Permanent link">¶</a></h2>
<h3 id="verify-by-fiscal-number">Verify by fiscal number<a class="headerlink" href="#verify-by-fiscal-number" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>GET /api/v1/verify/{fiscal_number}?auth_code={auth_code}
</code></pre></div>
<p><strong>No authentication required.</strong> This is a public endpoint. Rate-limited to prevent abuse.</p>
<p><strong>Response (200 — verified):</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-OUTLET001-000123"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"fiscal_authority_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSM-CLUSTER-01"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"merchant_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Acme SARL"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"outlet_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kinshasa Branch"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-02-17T14:32:00Z"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">116000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CDF"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"invoice_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sale"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"signature_valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"ledger_chain_valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"dgi_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"synced"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"dgi_acknowledged_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-02-17T14:35:12Z"</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Response (404 — not found):</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_found"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-OUTLET001-999999"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No invoice found with this fiscal number."</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Response (200 — tampered):</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tampered"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-OUTLET001-000123"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invoice exists but the provided auth_code does not match the signature on record."</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"signature_valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="verify-by-qr-payload">Verify by QR payload<a class="headerlink" href="#verify-by-qr-payload" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>POST /api/v1/verify/qr
Content-Type: application/json

{
  "qr_data": "https://verify.bonopay.cd/i?fn=BONO-OUTLET001-000123&amp;ac=MEUCIQD8j2w8s...&amp;ts=2026-02-17T14:32:00Z&amp;fa=HSM-CLUSTER-01"
}
</code></pre></div>
<p>The API parses the QR data, extracts the fiscal number and auth code, and performs the same verification flow. This endpoint is useful for mobile apps that decode QR images.</p>
<h3 id="bulk-verification">Bulk verification<a class="headerlink" href="#bulk-verification" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>POST /api/v1/verify/batch
Content-Type: application/json
Authorization: Bearer bono_key_abc123

{
  "invoices": [
    { "fiscal_number": "BONO-OUTLET001-000123", "auth_code": "MEUCIQD8j2w8s..." },
    { "fiscal_number": "BONO-OUTLET001-000124", "auth_code": "MEUCIQCx9k..." },
    { "fiscal_number": "BONO-OUTLET001-000125", "auth_code": "MEUCIQDp2..." }
  ]
}
</code></pre></div>
<p><strong>Response (200):</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-OUTLET001-000123"</span><span class="p">,</span><span class="w"> </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w"> </span><span class="nt">"signature_valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-OUTLET001-000124"</span><span class="p">,</span><span class="w"> </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w"> </span><span class="nt">"signature_valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-OUTLET001-000125"</span><span class="p">,</span><span class="w"> </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_found"</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"verified_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"not_found_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"tampered_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</code></pre></div>
<p>Bulk verification requires authentication (Bearer token) and is rate-limited separately (10 req/s, max 100 invoices per batch).</p>
<hr/>
<h2 id="cryptographic-verification-flow">Cryptographic verification flow<a class="headerlink" href="#cryptographic-verification-flow" title="Permanent link">¶</a></h2>
<p>The verification service performs these checks in order:</p>
<pre class="mermaid"><code>flowchart TD
    INPUT["Fiscal number + auth code"] --&gt; LOOKUP["1. Look up fiscal_number\nin Fiscal Ledger"]
    LOOKUP --&gt;|Not found| NF["❌ NOT FOUND"]
    LOOKUP --&gt;|Found| SIGCHECK["2. Verify ECDSA signature\nusing HSM public key"]
    SIGCHECK --&gt;|Invalid| TAMPERED["⚠️ TAMPERED"]
    SIGCHECK --&gt;|Valid| AUTHCHECK["3. Compare auth_code\nwith stored value"]
    AUTHCHECK --&gt;|Mismatch| TAMPERED
    AUTHCHECK --&gt;|Match| TSCHECK["4. Verify timestamp\nagainst ledger ordering"]
    TSCHECK --&gt;|Anomaly| TAMPERED
    TSCHECK --&gt;|Valid| CHAINCHECK["5. Verify hash chain\n(previous + current entry)"]
    CHAINCHECK --&gt;|Broken| TAMPERED
    CHAINCHECK --&gt;|Valid| VERIFIED["✅ VERIFIED"]</code></pre>
<h3 id="step-details">Step details<a class="headerlink" href="#step-details" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>What is checked</th>
<th>Failure meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1. Ledger lookup</strong></td>
<td>Fiscal number exists in the append-only Fiscal Ledger</td>
<td>Invoice was never sealed by Bono Pay — possible counterfeit</td>
</tr>
<tr>
<td><strong>2. Signature verification</strong></td>
<td>ECDSA signature over canonical payload is valid against the HSM's registered public key</td>
<td>Invoice data was modified after signing — tampered</td>
</tr>
<tr>
<td><strong>3. Auth code comparison</strong></td>
<td>Provided <code>auth_code</code> matches the stored cryptographic authentication code</td>
<td>The auth code on the receipt doesn't match the original — possible forgery</td>
</tr>
<tr>
<td><strong>4. Timestamp validation</strong></td>
<td>Timestamp is consistent with the ledger's monotonic ordering for that outlet</td>
<td>Timestamp was backdated or replayed</td>
</tr>
<tr>
<td><strong>5. Hash chain integrity</strong></td>
<td>The ledger entry's hash links correctly to the previous entry</td>
<td>Ledger was tampered with — entries inserted, deleted, or reordered</td>
</tr>
</tbody>
</table>
<h3 id="public-key-distribution">Public key distribution<a class="headerlink" href="#public-key-distribution" title="Permanent link">¶</a></h3>
<ul>
<li>The HSM's public key is published at <code>verify.bonopay.cd/.well-known/fiscal-keys.json</code>.</li>
<li>Keys are rotated according to the HSM key lifecycle (see ADR-0002). Old public keys remain available for verifying historical invoices.</li>
<li>The DGI receives the public key during registration and can independently verify signatures without calling the Bono Pay API.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">GET</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">ps</span><span class="p">:</span><span class="c1">//verify.bonopay.cd/.well-known/fiscal-keys.json</span>

<span class="p">{</span>
<span class="w">  </span><span class="nt">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fiscal_authority_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSM-CLUSTER-01"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"algorithm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ECDSA-P256"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"public_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE..."</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"valid_from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-03-01T00:00:00Z"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"valid_until"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="qr-code-payload-format">QR code payload format<a class="headerlink" href="#qr-code-payload-format" title="Permanent link">¶</a></h2>
<p>The QR code on every receipt encodes a URL that the verification portal can parse directly:</p>
<div class="highlight"><pre><span></span><code>https://verify.bonopay.cd/i?fn={fiscal_number}&amp;ac={auth_code}&amp;ts={timestamp}&amp;fa={fiscal_authority_id}
</code></pre></div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fn</code></td>
<td>Fiscal number</td>
<td><code>BONO-OUTLET001-000123</code></td>
</tr>
<tr>
<td><code>ac</code></td>
<td>Cryptographic auth code (Base64URL-encoded ECDSA signature)</td>
<td><code>MEUCIQD8j2w8s...</code></td>
</tr>
<tr>
<td><code>ts</code></td>
<td>Trusted timestamp (ISO 8601 UTC)</td>
<td><code>2026-02-17T14:32:00Z</code></td>
</tr>
<tr>
<td><code>fa</code></td>
<td>Fiscal authority ID</td>
<td><code>HSM-CLUSTER-01</code></td>
</tr>
</tbody>
</table>
<p>The QR code is generated as a <strong>QR Code Model 2</strong> with error correction level <strong>H</strong> (30% recovery) to ensure readability on thermal prints, wrinkled paper, and low-resolution phone cameras.</p>
<hr/>
<h2 id="whatsapp-verification">WhatsApp verification<a class="headerlink" href="#whatsapp-verification" title="Permanent link">¶</a></h2>
<p>The WhatsApp Invoice Bot (see <a href="../../platform/ai-capabilities/#2-whatsapp-invoice-bot">AI &amp; Natural Language Capabilities</a>) supports invoice verification as a public service — anyone with the bot's number can verify:</p>
<p><strong>By text:</strong></p>
<div class="highlight"><pre><span></span><code>User: Vérifier facture BONO-OUTLET001-000123
Bot:  ✅ FACTURE VÉRIFIÉE
      Commerçant: Acme SARL
      Date: 17 fév 2026, 14:32
      Montant: 116 000 FC
      DGI: Synchronisé ✅
</code></pre></div>
<p><strong>By QR photo:</strong></p>
<div class="highlight"><pre><span></span><code>User: [sends photo of receipt QR code]
Bot:  Scanning QR... ✅ FACTURE VÉRIFIÉE
      N° Fiscal: BONO-OUTLET001-000123
      Commerçant: Acme SARL
      Date: 17 fév 2026, 14:32
      Montant: 116 000 FC
      DGI: Synchronisé ✅
</code></pre></div>
<p><strong>Failed verification:</strong></p>
<div class="highlight"><pre><span></span><code>User: Vérifier facture FAKE-000001
Bot:  ❌ FACTURE NON TROUVÉE
      Ce numéro fiscal n'existe pas dans le système Bono Pay.
      Si vous pensez que c'est une erreur, contactez le commerçant.
</code></pre></div>
<h3 id="phase-phase-2-alongside-whatsapp-bot-launch">Phase: <strong>Phase 2</strong> (alongside WhatsApp bot launch)<a class="headerlink" href="#phase-phase-2-alongside-whatsapp-bot-launch" title="Permanent link">¶</a></h3>
<hr/>
<h2 id="sdk-verification-helpers">SDK verification helpers<a class="headerlink" href="#sdk-verification-helpers" title="Permanent link">¶</a></h2>
<p>Both the JavaScript and Python SDKs include verification methods:</p>
<h3 id="javascript-sdk">JavaScript SDK<a class="headerlink" href="#javascript-sdk" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">BonoPay</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@bonopay/sdk'</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">BonoPay</span><span class="p">();</span><span class="w"> </span><span class="c1">// No API key needed for verification</span>

<span class="c1">// Verify single invoice</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">verify</span><span class="p">(</span><span class="s1">'BONO-OUTLET001-000123'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">authCode</span><span class="o">:</span><span class="w"> </span><span class="s1">'MEUCIQD8j2w8s...'</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span><span class="w">          </span><span class="c1">// "verified"</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">signatureValid</span><span class="p">);</span><span class="w">  </span><span class="c1">// true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">dgiStatus</span><span class="p">);</span><span class="w">       </span><span class="c1">// "synced"</span>

<span class="c1">// Verify from QR data</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">verifyQR</span><span class="p">(</span>
<span class="w">  </span><span class="s1">'https://verify.bonopay.cd/i?fn=BONO-OUTLET001-000123&amp;ac=MEUCIQD8j2w8s...'</span>
<span class="p">);</span>

<span class="c1">// Offline signature verification (no API call)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">verifySignatureOffline</span><span class="p">(</span><span class="nx">payload</span><span class="p">,</span><span class="w"> </span><span class="nx">signature</span><span class="p">,</span><span class="w"> </span><span class="nx">publicKey</span><span class="p">);</span>
</code></pre></div>
<h3 id="python-sdk">Python SDK<a class="headerlink" href="#python-sdk" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">bonopay</span><span class="w"> </span><span class="kn">import</span> <span class="n">BonoPay</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">BonoPay</span><span class="p">()</span>  <span class="c1"># No API key needed for verification</span>

<span class="c1"># Verify single invoice</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s2">"BONO-OUTLET001-000123"</span><span class="p">,</span> <span class="n">auth_code</span><span class="o">=</span><span class="s2">"MEUCIQD8j2w8s..."</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>           <span class="c1"># "verified"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">signature_valid</span><span class="p">)</span>  <span class="c1"># True</span>

<span class="c1"># Bulk verify</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">verify_batch</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">"fiscal_number"</span><span class="p">:</span> <span class="s2">"BONO-OUTLET001-000123"</span><span class="p">,</span> <span class="s2">"auth_code"</span><span class="p">:</span> <span class="s2">"MEUCIQD8j2w8s..."</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"fiscal_number"</span><span class="p">:</span> <span class="s2">"BONO-OUTLET001-000124"</span><span class="p">,</span> <span class="s2">"auth_code"</span><span class="p">:</span> <span class="s2">"MEUCIQCx9k..."</span><span class="p">},</span>
<span class="p">])</span>

<span class="c1"># Offline signature verification</span>
<span class="n">valid</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">verify_signature_offline</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">public_key</span><span class="p">)</span>
</code></pre></div>
<h3 id="offline-verification">Offline verification<a class="headerlink" href="#offline-verification" title="Permanent link">¶</a></h3>
<p>The SDKs also support <strong>offline signature verification</strong> — given the canonical payload, the ECDSA signature, and the HSM's public key (cached from <code>/.well-known/fiscal-keys.json</code>), the SDK can verify the signature without calling the API. This is useful for:</p>
<ul>
<li>Auditors verifying large batches of invoices without rate limit concerns.</li>
<li>DGI systems that verify signatures in their own infrastructure.</li>
<li>Air-gapped environments where internet access is restricted.</li>
</ul>
<p>Offline verification checks the cryptographic signature only. It does <strong>not</strong> confirm ledger chain integrity, DGI sync status, or whether the invoice was voided/refunded after sealing.</p>
<hr/>
<h2 id="dashboard-verification">Dashboard verification<a class="headerlink" href="#dashboard-verification" title="Permanent link">¶</a></h2>
<p>The merchant dashboard includes inline verification:</p>
<ul>
<li><strong>Verification badge</strong> — every invoice in the dashboard shows a verification status icon (✅ verified, ⚠️ chain anomaly, 🔄 pending sync).</li>
<li><strong>Public link</strong> — each invoice detail page has a "Share verification link" button that copies the <code>verify.bonopay.cd</code> URL for that invoice.</li>
<li><strong>Bulk verify</strong> — merchants can select multiple invoices and run batch verification to confirm ledger integrity. This is useful after system migrations or to prepare for audits.</li>
<li><strong>Verification log</strong> — the dashboard shows how many times each invoice has been verified via the public portal, with timestamps and source channel (QR scan, manual entry, API, WhatsApp). No verifier identity is recorded.</li>
</ul>
<hr/>
<h2 id="anti-abuse-protections">Anti-abuse protections<a class="headerlink" href="#anti-abuse-protections" title="Permanent link">¶</a></h2>
<p>The public verification endpoints are unauthenticated by design — anyone should be able to verify an invoice. However, abuse prevention is critical:</p>
<table>
<thead>
<tr>
<th>Protection</th>
<th>Detail</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Rate limiting</strong></td>
<td>Single-invoice verification: 30 req/min per IP. Bulk: 10 req/s per API key, max 100 per batch.</td>
</tr>
<tr>
<td><strong>CAPTCHA</strong></td>
<td>Portal shows CAPTCHA after 10 consecutive lookups from the same session. API endpoint is CAPTCHA-free.</td>
</tr>
<tr>
<td><strong>No enumeration</strong></td>
<td>404 responses do not reveal whether the fiscal number format is valid — all non-matching inputs return the same "not found" response.</td>
</tr>
<tr>
<td><strong>Timing-safe comparison</strong></td>
<td>Auth code comparison uses constant-time comparison to prevent timing attacks.</td>
</tr>
<tr>
<td><strong>Logging</strong></td>
<td>Excessive verification attempts for the same fiscal number trigger an <code>invoice.verification_spike</code> alert (anomaly detection).</td>
</tr>
<tr>
<td><strong>Geo-restriction (optional)</strong></td>
<td>Merchants can restrict public verification to DRC IP ranges if they want to limit external probing.</td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="phasing">Phasing<a class="headerlink" href="#phasing" title="Permanent link">¶</a></h2>
<table>
<thead>
<tr>
<th>Capability</th>
<th>Phase 1</th>
<th>Phase 2</th>
<th>Phase 4</th>
</tr>
</thead>
<tbody>
<tr>
<td>Public Verification Portal</td>
<td>✅ Web portal + QR scanning</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td>Verification API (single + QR)</td>
<td>✅ Public, rate-limited</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td>SDK <code>verify()</code> + <code>verifyQR()</code></td>
<td>✅ In JS + Python SDKs</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td>Offline signature verification</td>
<td>✅ SDK offline mode</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td>Public key distribution (JWKS)</td>
<td>✅ <code>/.well-known/fiscal-keys.json</code></td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td>Dashboard verification badges</td>
<td>✅ Inline badges + share link</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td>Bulk verification API</td>
<td>—</td>
<td>✅ Authenticated, batch endpoint</td>
<td>—</td>
</tr>
<tr>
<td>WhatsApp verification</td>
<td>—</td>
<td>✅ Text + QR photo</td>
<td>—</td>
</tr>
<tr>
<td>Verification analytics</td>
<td>—</td>
<td>—</td>
<td>✅ Verification heatmaps, fraud detection</td>
</tr>
</tbody>
</table>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Security Elements" class="md-footer__link md-footer__link--prev" href="../security-elements/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Security Elements
              </div>
</div>
</a>
<a aria-label="Next: Reports (Z/X/A)" class="md-footer__link md-footer__link--next" href="../reports/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Reports (Z/X/A)
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.footer"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
<script src="../../assets/mermaid-zoom.js"></script>
</body>
</html>