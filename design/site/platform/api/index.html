
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../overview/" rel="prev"/>
<link href="../dashboard/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Invoicing API - Bono Pay Technical Design</title>
<link href="../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/mermaid-zoom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="#3FFF00" data-md-color-primary="#3FFF00" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#invoicing-api">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Bono Pay Technical Design" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Bono Pay Technical Design">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Bono Pay Technical Design
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Invoicing API
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Bono Pay Technical Design" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Bono Pay Technical Design">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Bono Pay Technical Design
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/overview/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/trust-boundary/">
<span class="md-ellipsis">
    
  
    Trust Boundary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/components/">
<span class="md-ellipsis">
    
  
    Component Map
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/data-flow/">
<span class="md-ellipsis">
    
  
    Data Flow
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Invoicing Platform
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Invoicing Platform
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../overview/">
<span class="md-ellipsis">
    
  
    Product Overview
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Invoicing API
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Invoicing API
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#authentication">
<span class="md-ellipsis">
      
        Authentication
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#core-endpoints">
<span class="md-ellipsis">
      
        Core endpoints
      
    </span>
</a>
<nav aria-label="Core endpoints" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1invoices">
<span class="md-ellipsis">
      
        POST /api/v1/invoices
      
    </span>
</a>
<nav aria-label="POST /api/v1/invoices" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#canonical-payload">
<span class="md-ellipsis">
      
        Canonical payload
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-apiv1invoicesfiscal_number">
<span class="md-ellipsis">
      
        GET /api/v1/invoices/{fiscal_number}
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-apiv1invoices">
<span class="md-ellipsis">
      
        GET /api/v1/invoices
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1invoicesfiscal_numbervoid">
<span class="md-ellipsis">
      
        POST /api/v1/invoices/{fiscal_number}/void
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1invoicesfiscal_numberrefund">
<span class="md-ellipsis">
      
        POST /api/v1/invoices/{fiscal_number}/refund
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1reports">
<span class="md-ellipsis">
      
        POST /api/v1/reports
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-apiv1tax-groups">
<span class="md-ellipsis">
      
        GET /api/v1/tax-groups
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#response-structure">
<span class="md-ellipsis">
      
        Response structure
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling">
<span class="md-ellipsis">
      
        Error handling
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#webhook-notifications">
<span class="md-ellipsis">
      
        Webhook notifications
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-examples">
<span class="md-ellipsis">
      
        Code examples
      
    </span>
</a>
<nav aria-label="Code examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#curl">
<span class="md-ellipsis">
      
        CURL
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#python">
<span class="md-ellipsis">
      
        Python
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#javascript">
<span class="md-ellipsis">
      
        JavaScript
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dashboard/">
<span class="md-ellipsis">
    
  
    Web Dashboard
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sdk/">
<span class="md-ellipsis">
    
  
    SDK &amp; Libraries
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Fiscal Engine
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            
  
    Fiscal Engine
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../fiscal/invoice-lifecycle/">
<span class="md-ellipsis">
    
  
    Invoice Lifecycle
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fiscal/tax-engine/">
<span class="md-ellipsis">
    
  
    Tax Engine (14 Groups)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fiscal/security-elements/">
<span class="md-ellipsis">
    
  
    Security Elements
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fiscal/reports/">
<span class="md-ellipsis">
    
  
    Reports (Z/X/A)
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Cloud &amp; Sync
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    Cloud &amp; Sync
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cloud/architecture/">
<span class="md-ellipsis">
    
  
    Cloud Architecture
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cloud/offline-sync/">
<span class="md-ellipsis">
    
  
    Offline-First Sync
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cloud/dgi-integration/">
<span class="md-ellipsis">
    
  
    DGI Integration
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Platform &amp; Integrations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Platform &amp; Integrations
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../multi-user/">
<span class="md-ellipsis">
    
  
    Multi-User Access
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ai-capabilities/">
<span class="md-ellipsis">
    
  
    AI &amp; Natural Language
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../integrations/">
<span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Regulatory
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Regulatory
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory/legal-framework/">
<span class="md-ellipsis">
    
  
    DRC Legal Framework
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory/arretes/">
<span class="md-ellipsis">
    
  
    Arrêté Summary
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../regulatory/sfe-specs/">
<span class="md-ellipsis">
    
  
    SFE Specifications
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    ADRs
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    ADRs
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/">
<span class="md-ellipsis">
    
  
    Index
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0001/">
<span class="md-ellipsis">
    
  
    0001 - Two-Phase Commit
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0002/">
<span class="md-ellipsis">
    
  
    0002 - Signature Algorithm
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0003/">
<span class="md-ellipsis">
    
  
    0003 - Platform Technology Stack
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0004/">
<span class="md-ellipsis">
    
  
    0004 - Cloud Fiscal Signing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/adr-0005/">
<span class="md-ellipsis">
    
  
    0005 - Strategic Pivot
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/cloud/">
<span class="md-ellipsis">
    
  
    Cloud API
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/invoicing-sdk/">
<span class="md-ellipsis">
    
  
    Invoicing SDK
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Implementation
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            
  
    Implementation
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/roadmap/">
<span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-1/">
<span class="md-ellipsis">
    
  
    Phase 1 - Software Invoicing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-2/">
<span class="md-ellipsis">
    
  
    Phase 2 - POS &amp; Retail
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-3/">
<span class="md-ellipsis">
    
  
    Phase 3 - USB Hardware
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../implementation/phase-4/">
<span class="md-ellipsis">
    
  
    Phase 4 - Enterprise
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#authentication">
<span class="md-ellipsis">
      
        Authentication
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#core-endpoints">
<span class="md-ellipsis">
      
        Core endpoints
      
    </span>
</a>
<nav aria-label="Core endpoints" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1invoices">
<span class="md-ellipsis">
      
        POST /api/v1/invoices
      
    </span>
</a>
<nav aria-label="POST /api/v1/invoices" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#canonical-payload">
<span class="md-ellipsis">
      
        Canonical payload
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-apiv1invoicesfiscal_number">
<span class="md-ellipsis">
      
        GET /api/v1/invoices/{fiscal_number}
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-apiv1invoices">
<span class="md-ellipsis">
      
        GET /api/v1/invoices
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1invoicesfiscal_numbervoid">
<span class="md-ellipsis">
      
        POST /api/v1/invoices/{fiscal_number}/void
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1invoicesfiscal_numberrefund">
<span class="md-ellipsis">
      
        POST /api/v1/invoices/{fiscal_number}/refund
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-apiv1reports">
<span class="md-ellipsis">
      
        POST /api/v1/reports
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#get-apiv1tax-groups">
<span class="md-ellipsis">
      
        GET /api/v1/tax-groups
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#response-structure">
<span class="md-ellipsis">
      
        Response structure
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling">
<span class="md-ellipsis">
      
        Error handling
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#webhook-notifications">
<span class="md-ellipsis">
      
        Webhook notifications
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-examples">
<span class="md-ellipsis">
      
        Code examples
      
    </span>
</a>
<nav aria-label="Code examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#curl">
<span class="md-ellipsis">
      
        CURL
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#python">
<span class="md-ellipsis">
      
        Python
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#javascript">
<span class="md-ellipsis">
      
        JavaScript
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="invoicing-api">Invoicing API<a class="headerlink" href="#invoicing-api" title="Permanent link">¶</a></h1>
<p>Bono Pay is fiscal invoicing infrastructure for the DRC. The Invoicing API is the primary developer surface that receives canonical payloads, applies the 14 DGI tax groups, and routes the request through the Cloud Signing Service (HSM-backed). Every fiscal event is numbered by the Monotonic Counter Manager, signed inside the HSM, timestamped, and stored in the hash-chained fiscal ledger before Bono Pay returns the sealed response to the caller. This surface honors the SFE specifications (docs/sfe-specifications-v1-summary) by supporting the five mandatory invoice types, the 14 tax groups, immutable security elements, and offline queueing semantics required by the DGI.</p>
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">¶</a></h2>
<p>Requests require an outbound API key scoped to a merchant and an outlet. Send <code>Authorization: Bearer &lt;token&gt;</code> plus <code>X-BonoPay-Merchant-ID</code> and <code>X-BonoPay-Outlet-ID</code> headers so the Cloud can enforce multi-tenant quotas. Optional headers such as <code>X-BonoPay-User-ID</code> or <code>X-BonoPay-Source</code> help auditors trace which dashboard user, SDK, or future POS terminal produced a fiscal request. The platform enforces rate limits per outlet and per API key (e.g., 60 requests/min); honor <code>Retry-After</code> in <code>429</code> responses and back off accordingly.</p>
<h2 id="core-endpoints">Core endpoints<a class="headerlink" href="#core-endpoints" title="Permanent link">¶</a></h2>
<h3 id="post-apiv1invoices">POST /api/v1/invoices<a class="headerlink" href="#post-apiv1invoices" title="Permanent link">¶</a></h3>
<p>Create and fiscalize an invoice in one call. Bono Pay validates the canonical payload, applies the tax engine (all 14 DGI tax groups plus client classification), and forwards the payload to the Cloud Signing Service (HSM). The cloud assigns the next sequential fiscal number for the outlet, signs the payload, timestamps it, generates the QR payload, stores the sealed invoice in the fiscal ledger, and returns the response that clients may display or deliver via email/WhatsApp/PDF/print.</p>
<p>Bono Pay enforces deterministic field ordering so every signature is reproducible. Clients queue invoices locally (IndexedDB on the dashboard or SQLite in SDKs) when offline and flush them via this endpoint once connectivity returns.</p>
<h4 id="canonical-payload">Canonical payload<a class="headerlink" href="#canonical-payload" title="Permanent link">¶</a></h4>
<ol>
<li><code>merchant_nif</code> (string) — tax identifier for the merchant issuing the invoice.</li>
<li><code>outlet_id</code> (string) — the outlet within the merchant namespace.</li>
<li><code>pos_terminal_id</code> (string) — the terminal, SDK, or service creating the invoice.</li>
<li><code>cashier_id</code> (string) — operator or session token.</li>
<li><code>invoice_type</code> (sale, advance, credit_note, export, export_credit).</li>
<li><code>timestamp</code> (ISO 8601 UTC) — when the invoice was authored.</li>
<li><code>client</code> — object with <code>name</code>, <code>nif</code>, and <code>classification</code> (<code>Individual</code>, <code>Company</code>, <code>CommercialIndividual</code>, <code>Professional</code>, <code>Embassy</code>).</li>
<li><code>items[]</code> — array of line items; each entry lists <code>code</code>, <code>description</code>, <code>quantity</code>, <code>unit_price</code>, <code>tax_group</code>, and <code>taxable_unit</code>.</li>
<li><code>tax_groups[]</code> — array covering each of the 14 DGI tax groups present (<code>code</code>, <code>name</code>, <code>rate</code>, <code>base_amount</code>, <code>tax_amount</code>).</li>
<li><code>totals</code> — object with <code>subtotal</code>, <code>total_vat</code>, <code>total</code>, and <code>currency</code>.</li>
<li><code>payments[]</code> — array of payment instruments with <code>method</code>, <code>amount</code>, <code>instrument_id</code>, and <code>currency</code>.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"merchant_nif"</span><span class="p">:</span><span class="w"> </span><span class="s2">"308123456"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"outlet_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outlet-kin001"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"pos_terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sdk-js-01"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"cashier_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cashier-13"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"invoice_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sale"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-02-17T04:00:00Z"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"client"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Acme Ltd"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"nif"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"classification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Company"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONS-001"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Consulting hours"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500.00"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"tax_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TG03"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"taxable_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hour"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"tax_groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TG03"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard VAT — Services"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.16"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.00"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160.00"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">"totals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.00"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"total_vat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160.00"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1160.00"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CDF"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mobile_money"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1160.00"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AIRTEL-001"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CDF"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="get-apiv1invoicesfiscal_number">GET /api/v1/invoices/{fiscal_number}<a class="headerlink" href="#get-apiv1invoicesfiscal_number" title="Permanent link">¶</a></h3>
<p>Retrieve a sealed invoice with every security element and ledger metadata. The response includes the canonical payload, fiscal number, fiscal authority ID, authentication code, timestamp, QR payload, <code>ledger_hash</code>, <code>dgi_status</code> (<code>queued</code>, <code>synced</code>, <code>failed</code>), and the originating <code>outlet_id</code>.</p>
<h3 id="get-apiv1invoices">GET /api/v1/invoices<a class="headerlink" href="#get-apiv1invoices" title="Permanent link">¶</a></h3>
<p>List invoices with filters (<code>merchant_nif</code>, <code>outlet_id</code>, <code>date_range</code>, <code>client.nif</code>, <code>status</code>, <code>fiscal_number</code>) plus pagination (<code>page</code>, <code>per_page</code>). Sort by <code>timestamp</code> or <code>fiscal_number</code>. Include query parameters to surface <code>dgi_status</code> so dashboards can display completion badges (real-time vs. queued).</p>
<h3 id="post-apiv1invoicesfiscal_numbervoid">POST /api/v1/invoices/{fiscal_number}/void<a class="headerlink" href="#post-apiv1invoicesfiscal_numbervoid" title="Permanent link">¶</a></h3>
<p>Issue a credit note fiscal event. Provide the reason and item adjustments; Bono Pay treats the event as a new fiscal event, repeats the tax engine work, signs it via the Cloud Signing Service, and appends it to the ledger while referencing the original invoice.</p>
<h3 id="post-apiv1invoicesfiscal_numberrefund">POST /api/v1/invoices/{fiscal_number}/refund<a class="headerlink" href="#post-apiv1invoicesfiscal_numberrefund" title="Permanent link">¶</a></h3>
<p>Create a refund fiscal event that preserves audit trails. Include the refund <code>amount</code>, <code>currency</code>, <code>payment_reference</code>, and optional <code>reason</code>. The Cloud Signing Service returns a new fiscal number/auth code pair for the refund.</p>
<h3 id="post-apiv1reports">POST /api/v1/reports<a class="headerlink" href="#post-apiv1reports" title="Permanent link">¶</a></h3>
<p>Trigger Z/X/A and audit exports derived from the cloud fiscal ledger. Provide the report <code>type</code>, applicable <code>outlet_id</code>, and the <code>period</code> (date or shift). The response carries <code>report_id</code>, <code>download_url</code>, and the <code>ledger_hash</code> digest that links the report back to the sealed invoices.</p>
<h3 id="get-apiv1tax-groups">GET /api/v1/tax-groups<a class="headerlink" href="#get-apiv1tax-groups" title="Permanent link">¶</a></h3>
<p>Return the manifest of all 14 DGI tax groups with <code>code</code>, <code>name</code>, <code>rate</code>, and <code>effective_from</code> timestamps. Clients cache this payload so offline queues can compute totals before submission.</p>
<h2 id="response-structure">Response structure<a class="headerlink" href="#response-structure" title="Permanent link">¶</a></h2>
<p>Bono Pay returns a sealed invoice envelope that mirrors the canonical payload plus the security elements minted inside the Cloud Signing Service (HSM).</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_FISCALIZED"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-2026-000458"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"auth_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H8F2-A9D3-9001"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-02-17T04:00:02Z"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"qr_payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://bonopay.cd/verify?fiscal_number=BONO-2026-000458"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"fiscal_authority_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cloud-signer-west-1"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"dgi_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queued"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"ledger_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb924"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"security_elements"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-2026-000458"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"auth_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H8F2-A9D3-9001"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-02-17T04:00:02Z"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"qr_payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://bonopay.cd/verify?fiscal_number=BONO-2026-000458"</span><span class="p">,</span>
<span class="w">      </span><span class="nt">"fiscal_authority_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cloud-signer-west-1"</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>dgi_status</code> field tracks whether the Sync Agent has uploaded the sealed invoice to the DGI: <code>queued</code>, <code>synced</code>, or <code>failed</code>. Client apps can highlight the sync status (green Real-time, yellow Queued, red Retry) without ever fabricating <code>fiscal_number</code> or <code>auth_code</code>.</p>
<h2 id="error-handling">Error handling<a class="headerlink" href="#error-handling" title="Permanent link">¶</a></h2>
<ul>
<li><code>400 Invalid canonical payload</code> — missing fields, incorrect ordering, or mismatched tax totals.</li>
<li><code>401 Unauthorized</code> — missing or invalid bearer token.</li>
<li><code>403 Forbidden</code> — the API key lacks scope for the merchant/outlet requested.</li>
<li><code>422 Fiscalization failed</code> — the Cloud Signing Service rejected the payload (totals, tax group mismatch, unsupported invoice type).</li>
<li><code>429 Too many requests</code> — rate limit exceeded; honor the <code>Retry-After</code> header before resubmitting.</li>
<li><code>500 Internal server error</code> — transient HSM, ledger, or Sync Agent failure; retry with exponential backoff.</li>
</ul>
<h2 id="webhook-notifications">Webhook notifications<a class="headerlink" href="#webhook-notifications" title="Permanent link">¶</a></h2>
<p>Bono Pay can deliver webhook notifications when invoices change state. Each webhook is signed with <code>X-BonoPay-Signature</code> (HMAC-SHA256) and includes <code>fiscal_number</code>, <code>dgi_status</code>, <code>ledger_hash</code>, and the canonical payload hash. Statuses include <code>fiscalized</code>, <code>synced</code>, <code>dgi_acknowledged</code>, and <code>fiscal_error</code>. Queue indicators (e.g., <code>Queued → Fiscalized</code>) let dashboards update colored badges in near real time.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice.fiscalized"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"fiscal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BONO-2026-000458"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"dgi_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queued"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"ledger_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3b0c44298fc1c149afbf4c8996fb924"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboard"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"security_elements"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"auth_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H8F2-A9D3-9001"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-02-17T04:00:02Z"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="code-examples">Code examples<a class="headerlink" href="#code-examples" title="Permanent link">¶</a></h2>
<h3 id="curl">CURL<a class="headerlink" href="#curl" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://api.bonopay.cd/api/v1/invoices<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">"Authorization: Bearer </span><span class="nv">$BONOPAY_API_TOKEN</span><span class="s2">"</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">"X-BonoPay-Merchant-ID: bonopay-ks-1"</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">"X-BonoPay-Outlet-ID: outlet-kin001"</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">"Content-Type: application/json"</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">'@invoice.json'</span>
</code></pre></div>
<h3 id="python">Python<a class="headerlink" href="#python" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s2">"https://api.bonopay.cd/api/v1/invoices"</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"Authorization"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"Bearer </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">'BONOPAY_API_TOKEN'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="s2">"X-BonoPay-Merchant-ID"</span><span class="p">:</span> <span class="s2">"bonopay-ks-1"</span><span class="p">,</span>
        <span class="s2">"X-BonoPay-Outlet-ID"</span><span class="p">:</span> <span class="s2">"outlet-kin001"</span>
    <span class="p">},</span>
    <span class="n">json</span><span class="o">=</span><span class="n">invoice_payload</span>  <span class="c1"># see canonical structure above</span>
<span class="p">)</span>

<span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">"payload"</span><span class="p">][</span><span class="s2">"fiscal_number"</span><span class="p">])</span>
</code></pre></div>
<h3 id="javascript">JavaScript<a class="headerlink" href="#javascript" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">createInvoice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s2">"https://api.bonopay.cd/api/v1/invoices"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">"Authorization"</span><span class="o">:</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="nx">BONOPAY_API_TOKEN</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"X-BonoPay-Merchant-ID"</span><span class="o">:</span><span class="w"> </span><span class="s2">"bonopay-ks-1"</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"X-BonoPay-Outlet-ID"</span><span class="o">:</span><span class="w"> </span><span class="s2">"outlet-kin001"</span><span class="p">,</span>
<span class="w">      </span><span class="s2">"Content-Type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"application/json"</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">().</span><span class="nx">payload</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">memoryPayload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/* canonical payload */</span>
<span class="p">};</span>
</code></pre></div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
<script src="../../assets/mermaid-zoom.js"></script>
</body>
</html>